---
title: EchoScript for Map Mock
description: Learning EchoScript to modify HTTP(s) request/response
---

import { Image } from 'astro:assets';
import MaterialSymbolsMapOutline from '~icons/material-symbols/map-outline';
import { inlineIcon } from "../../../styles/styles.ts"
import echoScriptImage from '../../../assets/map-echoscript.png';


**EchoScript** is the core of Map Mock. It can work with both Map Local and Map Remote.

<Image src={echoScriptImage} style="border-radius:3px;" alt="EchoScript" />

By default, EchoScript code is commented out, which means it does nothing.
```go
// on_request := func(env, req) {
//   return {}
// }

// on_response := func(env, res) {
//   return {}
// }
```

## Callback functions
EchoScript has two standard callback functions: on_request and on_response,
which can be used to modify HTTP(s) request and response respectively.

### on_request
The return value of **on_request** is a **map**, which tells EchoProxy how to modify HTTP(s) request.
Return an empty map **\{\}** means it does nothing.

```go
on_request := func(env, req) {
  return {}
}
```

The structure of on_request **return** value. All fields are optional.
```json
{
  // change request method, value can be GET/POST/PUT ...
  method: string,
  // change request URL
  url: string,
  // change request URL query parameters, merge original map
  query: map,
  // change request header key/value pairs, merge original map
  header: map,
  // change request cookie key/value pairs, merge original map
  cookie: map,
  // change request body, which can be a map or string
  body: map | string
}
```

### on_response
The return value of **on_response** is a **map**, which tells EchoProxy how to modify HTTP(s) response.
Return an empty map **\{\}** means it does nothing.

```go
on_response := func(env, res) {
  return {}
}
```

The structure of on_response **return** value. All fields are optional.
```json
{
  // change response HTTP status code, value can be 200/302/404 ...
  code: int,
  // change response header key/value pairs, merge original map
  header: map,
  // change response cookie key/value pairs, merge original map
  cookie: map,
  // change response body, which can be a map or string
  body: map | string
}
```

## Function arguments
### req
### res
### env
